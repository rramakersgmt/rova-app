<!DOCTYPE html>
<html>

<head>
    <title></title>
    <meta charset="utf-8">

    <link href="styles/overrides.css" rel="stylesheet">
    <link href="styles/main.css" rel="stylesheet">

    <script src="cordova.js"></script>
    <script src="kendo/js/jquery.min.js"></script>
    <script src="app.js"></script>
    <script src="http://kendo.cdn.telerik.com/2016.2.504/js/kendo.all.min.js"></script>

    <link rel="stylesheet" href="http://kendo.cdn.telerik.com/2016.2.504/styles/kendo.common.min.css"/>
    <link rel="stylesheet" href="http://kendo.cdn.telerik.com/2016.2.504/styles/kendo.silver.min.css"/>

    <link rel="stylesheet" href="http://kendo.cdn.telerik.com/2016.2.504/styles/kendo.default.min.css"/>
    
</head>

<body id="kendoUiMobileApp">
    <script src="components/home/index.js"></script>
    <script src="kendo/js/kendo.culture.nl-NL.js"></script>
    <script src="scripts/scanner.js"></script>

    <!-- START_CUSTOM_CODE_kendoUiMobileApp -->
    <!-- Add custom code here. For more information about custom code, see http://docs.telerik.com/platform/screenbuilder/troubleshooting/how-to-keep-custom-code-changes -->
<script>

    kendo.culture("nl-NL")
    var url="http://clearweigh.gmt.nl/demo/";
    
    var afvalDataSource = new kendo.data.DataSource({
        transport: {
            read: {
                url: url + "afval",
                jsonpCallback: "CallBackAfval",
                type: "get",
                dataType: "jsonp",
                cache: true,
             },
        },
        // describe the result format
        schema: {
			model: {
                id: "afval_id",
                fields: {
                    afval_id:		{type: "number"},
                    afval_code:		{type: "string"},
                    afval_omschr: 	{type: "string"},
                    prijs:			{type: "number"},
                    afval_type: 	{type: "string", hidden: true},
                },
            },
            
        },
    });
    afvalDataSource.read();    

    var wegingenDataSource = new kendo.data.DataSource({
        transport: {
            read: {
                url: url + "wegingen",
                /*url: "wegingen.jsonp",*/
                jsonpCallback: "CallBackWegingen",
                type: "get",
                dataType: "jsonp",
                cache: false,
            },
            update: {
                url: url + "wegingupdate",
                type: "get",
                dataType: "jsonp",
                jsonpCallback: "CallBackWegingUpdate",
                complete: function(e) {
                    	alert("wegingends update complete");
                    	$("#grid").data("kendoGrid").dataSource.read();
                },
            },
        },
        requestEnd: function (e) {
            /*alert("wegingends requestend: " + e.type);*/
        	if (e.type != "read") {
            	// refresh the grid
        	    e.sender.read();
                /*$("#grid").data("kendoGrid").dataSource.read();*/
    	    }
	    },
        /*
        page: 1,
        pageSize: 11,*/
        // describe the result format
        schema: {
			model: {
                id: "hiddenkey",
                fields: {
                    hiddenkey: 		{type: "number", hidden: true},
                    bonnr: 			{type: "string"},
                    postcode: 		{type: "string"},
                    datum:			{type: "string"},
                    afval:   		{type: "number", hidden: true},
                    afval_type: 	{type: "string", hidden: true},
                    afval_omschr: 	{type: "string"},
                    afval_prijs:	{type: "number"},
                    quotum:     	{type: "number"},
                    inweging:   	{type: "number"},
                    straat:     	{type: "string"},
                    plaats:     	{type: "string"},
                    gemeente:   	{type: "string"},
                },
            },
    	},
    });    

</script>    
    
    <!-- END_CUSTOM_CODE_kendoUiMobileApp -->
</body>

</html>